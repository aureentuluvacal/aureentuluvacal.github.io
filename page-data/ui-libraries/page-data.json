{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/ui-libraries/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Cal Perez"}},"markdownRemark":{"id":"a2bf9d99-bc13-5ebe-bf8c-dc1ad54c501b","excerpt":"I inherited a decently large codebase with a lot of legacy code (Rails 4.2.7, Handlebars, and a lot of jQuery). React components were built in an effort to…","timeToRead":5,"html":"<p>I inherited a decently large codebase with <em>a lot</em> of legacy code (Rails 4.2.7, Handlebars, and a lot of jQuery). React components were built in an effort to modernize the front end, but it was about 5% of the front end. I knew converting it all would be one of our years long projects, and I wanted to make that process as painless as possible. In my head, I saw what the front end would become: consistent, modular, easy to update, 100% in React. However, I had no foundation to start with, which prompted me to build a UI library.</p>\n<h2>Where I started</h2>\n<p>I’ve used <a href=\"https://material-ui.com/\">MaterialUI</a> and <a href=\"https://semantic-ui.com/\">SemanticUI</a> before so I already had a baseline for what a UI library was. That is, a collection of self-contained components that follow a specific design pattern. The design can either be super specific like MaterialUI (since it’s based off of Google’s material design) or be a little more customizable like Semantic.</p>\n<p>When I started on the library, we had just rebranded and the entire design of the app was wildly different. Different fonts, different colors, different usage of space, different shapes on the page, all of it. The upside to that situation was I could start from scratch using the new global variables I had set up for the new brand.</p>\n<p>The first component I wrote was a basic button styled with an SCSS module.</p>\n<blockquote>\n<p>Note: Our codebase uses Javascript, SASS modules, and the <strong>classnames</strong> package for conditional styling. You can sub in <strong>styled-components</strong> or Typescript.</p>\n</blockquote>\n<h4>Button.jsx</h4>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// This is what it looked like a year ago.</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">'prop-types'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'./Button.module.scss'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Button</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> onClick<span class=\"token punctuation\">,</span> text <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onClick<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>text<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nButton<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">onClick</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>func<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nButton<span class=\"token punctuation\">.</span>defaultProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">onClick</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Button<span class=\"token punctuation\">;</span></code></pre></div>\n<h4>Button.module.scss</h4>\n<div class=\"gatsby-highlight\" data-language=\"scss\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token comment\">// We have a Webpack alias pointing to our global variables.</span>\n<span class=\"token keyword\">@import</span> <span class=\"token string\">'~styles/_variables'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token selector\">.Button </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$mauve</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid <span class=\"token variable\">$mauve</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$border-radius-button</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> inline-block<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">vertical-align</span><span class=\"token punctuation\">:</span> middle<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 36px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 0 16px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">cursor</span><span class=\"token punctuation\">:</span> pointer<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">line-height</span><span class=\"token punctuation\">:</span> 36px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">box-shadow</span><span class=\"token punctuation\">:</span> 0 1px 1px 0 <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>black<span class=\"token punctuation\">,</span> 0.05<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> inset 0 1px 0 0 <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>white<span class=\"token punctuation\">,</span> 0.1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token selector\"><span class=\"token parent important\">&amp;</span>:hover </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$mauve</span><span class=\"token punctuation\">,</span> 0.9<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$mauve</span><span class=\"token punctuation\">,</span> 0.9<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The styles themselves don’t matter, but rather how the component is built. It needed to be simple enough to be reusable across the entire site, but complex enough to grant us the ability to customize its visuals and functionality.</p>\n<p>I feel like we’ve found the right system for balancing the two, including leveraging <code class=\"language-text\">classnames</code> to use specific styles in the presence of certain props.</p>\n<p>For example:</p>\n<h4>Button.jsx</h4>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// We would destructure props before this.</span>\n<span class=\"token keyword\">const</span> hasClassName <span class=\"token operator\">=</span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span>className<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> cx <span class=\"token operator\">=</span> <span class=\"token function\">classNames</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">cx</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Button'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">'Button--danger'</span><span class=\"token operator\">:</span> danger<span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">'Button--icon'</span><span class=\"token operator\">:</span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span>icon<span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">'Button--loading'</span><span class=\"token operator\">:</span> loading<span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">'Button--logo'</span><span class=\"token operator\">:</span> logo<span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">'Button--small'</span><span class=\"token operator\">:</span> small<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">OutlinedButton</span><span class=\"token operator\">:</span> category <span class=\"token operator\">===</span> <span class=\"token string\">'outlined'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">IconButton</span><span class=\"token operator\">:</span> category <span class=\"token operator\">===</span> <span class=\"token string\">'icon'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>className<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> hasClassName<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And prepare styles, like “Button—danger” , in the SCSS file as follows:</p>\n<h4>Button.module.scss</h4>\n<div class=\"gatsby-highlight\" data-language=\"scss\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token selector\">.Button </span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Styles from before...</span>\n  <span class=\"token comment\">// \"danger\" shamelessly stolen from Bootstrap.</span>\n  <span class=\"token selector\"><span class=\"token parent important\">&amp;</span>--danger </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$cinnabar-red</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-color</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$cinnabar-red</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token selector\"><span class=\"token parent important\">&amp;</span>:hover </span><span class=\"token punctuation\">{</span>\n      <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$milano-red</span><span class=\"token punctuation\">;</span>\n      <span class=\"token property\">border-color</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$milano-red</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>So if I did <code class=\"language-jsx\"> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Don't click me.<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">danger</span> <span class=\"token punctuation\">/></span></span></code> it would render a red variant of our button because the <code class=\"language-text\">danger</code> prop is present.</p>\n<h2>Adding structure</h2>\n<p>I first encountered this iteration of a UI Library from one of my awesome coworkers at Lessonly. He saw the value of adding this level of structure to our UI. He also introduced a mandatory file structure for each new component. Within the context of the Button example, that structure looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">└── ui\n    ├── Button\n    │   ├── Button.jsx\n    │   ├── Button.module.scss\n    │   ├── Button.test.js\n    │   ├── index.js\n    │   └── README.md\n    └── index.js</code></pre></div>\n<p>where the <em>ui</em> directory houses all the UI components in our library and each directory within it is named after a different component. There should be five files in each component directory:</p>\n<ol>\n<li>The actual component.</li>\n<li>A file for styles.</li>\n<li>A unit test.</li>\n<li>An index.js file for easy exporting.</li>\n<li>A README.md to describe the different variations of the component and how it will be used.</li>\n</ol>\n<p>The <em>index.js</em> file in the root of <em>ui</em> directory serves to export each component from one place. Like so:</p>\n<h4>ui/index.js</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> Button <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./Button'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// etc.</span></code></pre></div>\n<p>so we can import it in other components just using <code class=\"language-javascript\"> <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Button <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'~ui'</span><span class=\"token punctuation\">;</span></code></p>\n<h2>What I learned building my own</h2>\n<p>Building out the library was the easy part because we could justify adding new components based on need. The more challenging bit was making sure we refactored regularly as the number of ways to customize the component grew.</p>\n<p>Currently, our Button component sits at twelve props. This seems like a lot, but each prop reflects a solution to a problem we needed to address in the app. While the specific props may be unique to our situation, I think all props inherently should serve the user experience in a concrete fashion.</p>\n<p>The <code class=\"language-text\">danger</code> example above is an example of a visual variant, where the Button that’s rendered with the “Button—danger” class looks different from the default Button, and also represents a change to the user’s experience. We would only use this prop if users were about to delete something and we wanted to caution them. This is a concrete reason.</p>\n<p>Adding a prop like <code class=\"language-text\">thickBorder</code>, would be (1) weird and (2) serve no purpose other than to look a little different. I try to avoid those situations.</p>\n<p>I also realize, in retrospect, how grateful I am that I built the UI library right after the rebrand. The library has grown into 23 components. It’s made writing React more fun because it forces me break down the UI into smaller building blocks and gives us the ability to propogate style changes with one adjustment in the component’s SCSS file.</p>\n<p>I’m excited to see where it goes in the next year.</p>","frontmatter":{"title":"Building a UI Library","date":"May 16, 2020","description":"I built a UI library when I started at Iris. It's one of the best things I've ever made.","subtitle":null,"tags":["Code"]}}},"pageContext":{"slug":"/ui-libraries/","previous":{"fields":{"slug":"/goals-for-blog/"},"frontmatter":{"title":"Goals for this Blog","subtitle":null}},"next":{"fields":{"slug":"/logic/"},"frontmatter":{"title":"Logic","subtitle":null}}}},
    "staticQueryHashes": ["3000541721","731186232"]}